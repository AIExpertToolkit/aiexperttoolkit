<section class="section faq" aria-labelledby="faq-title">
  <div class="wrap">
    <h2 id="faq-title">Frequently Asked Questions</h2>

    {% assign faq_items = include.faq | default: page.faq %}
    <div class="faq-list">
      {% for item in faq_items %}
      {% assign qid = item.q | slugify %}
      <details class="faq-item" id="{{ qid }}" {% if forloop.index == 1 %}open{% endif %}>
        <summary><strong>{{ item.q }}</strong>
          <a href="#{{ qid }}" class="faq-link" aria-label="Link to this question">ðŸ”—</a>
        </summary>
        <div class="faq-a">{{ item.a }}</div>
      </details>
      {% endfor %}
    </div>
  </div>
</section>

<style>
  .faq-item{ margin:.6rem 0; padding:.4rem .6rem; border-radius:.5rem; border:1px solid rgba(255,255,255,.08) }
  .faq-item[open]{ background:rgba(255,255,255,.03) }
  .faq-a{ margin-top:.5rem }
  .faq-link{ margin-left:.5rem; text-decoration:none }
</style>

{% assign faq_items = include.faq | default: page.faq %}
{% if faq_items and faq_items.size > 0 %}
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"FAQPage",
  "mainEntity":[
    {% for item in faq_items %}
    {"@type":"Question","name": {{ item.q | jsonify }},"acceptedAnswer":{"@type":"Answer","text": {{ item.a | jsonify }}}}{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ]
}
</script>
{% endif %}

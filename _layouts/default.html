<!doctype html>
<html lang="{{ page.lang | default: site.lang | default: 'en' }}">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="format-detection" content="telephone=no" />
  <title>{% if page.title %}{{ page.title | escape }} | {% endif %}{{ site.title | default: "AI Expert Toolkit" }}</title>
  <meta name="description" content="{{ page.description | default: site.description | escape }}">

  {%- comment -%} Canonical & robots {%- endcomment -%}
  {% assign canon = page.canonical_url | default: page.url | absolute_url %}
  <link rel="canonical" href="{{ canon }}">
  {% if page.noindex %}
    <meta name="robots" content="noindex, nofollow">
  {% else %}
    <meta name="robots" content="index, follow, max-image-preview:large">
  {% endif %}

  {%- comment -%} Basic OG/Twitter {%- endcomment -%}
  <meta property="og:title" content="{% if page.title %}{{ page.title | escape }} | {% endif %}{{ site.title | default: 'AI Expert Toolkit' }}">
  <meta property="og:description" content="{{ page.description | default: site.description | escape }}">
  <meta property="og:url" content="{{ canon }}">
  <meta property="og:type" content="{% if page.article or page.layout == 'post' %}article{% else %}website{% endif %}">
  <meta name="twitter:card" content="summary_large_image">

  <link rel="preload" href="{{ site.baseurl }}/assets/css/base.css" as="style">
  <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/base.css">

  {%- comment -%} GA4 (respect excludes + per-page disable) {%- endcomment -%}
  {% assign _path = page.url | default: '' %}
  {% assign _excluded = false %}
  {% for p in site.ga_exclude %}
    {% if _path == p or _path contains p %}
      {% assign _excluded = true %}
    {% endif %}
  {% endfor %}
  {% unless page.disable_ga or _excluded %}
    {% include ga4.html %}
  {% endunless %}

  {%- comment -%} Organization + WebSite (SearchAction) JSON-LD {%- endcomment -%}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "{{ site.title | default: 'AI Expert Toolkit' | escape }}",
    "url": "{{ site.url }}{{ site.baseurl }}",
    "logo": "{{ site.url }}{{ site.baseurl }}{{ site.logo | default: '/assets/img/favicon.svg' }}"
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "url": "{{ site.url }}{{ site.baseurl }}",
    "name": "{{ site.title | default: 'AI Expert Toolkit' | escape }}",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "{{ site.url }}{{ site.baseurl }}/search?q={query}",
      "query-input": "required name=query"
    }
  }
  </script>

  {%- comment -%} BreadcrumbList JSON-LD (fallback) {%- endcomment -%}
  {% if page.breadcrumbs %}
    {% include breadcrumbs.html %}
  {% else %}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "{{ site.url }}{{ site.baseurl }}/"
      },{
        "@type": "ListItem",
        "position": 2,
        "name": "{{ page.title | default: 'Page' | escape }}",
        "item": "{{ canon }}"
      }]
    }
    </script>
  {% endif %}
</head>
<body>
  <a class="skip-link" href="#main">Skip to content</a>
  {% include header.html %}
  <main id="main" class="site-main" role="main">
    {{ content }}
  </main>
  {% include footer.html %}
</body>
</html>
